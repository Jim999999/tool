linux vim编辑
替换：
.,$%s/abc/cbd/g  #当前到最后替换abc为cbd
noh #搜索字符串显示高亮后，取消高亮的字符显示，则在执行ESC、冒号后输入

laravel
https://laravelacademy.org/laravel-tutorial-5_7
安装
1.composer 安装
1-1、设置国内镜像 中国镜像：http://pkg.phpcomposer.com/ 
composer config -g repo.packagist composer https://packagist.phpcomposer.com
1-2、根目录下安装
composer create-project laravel/laravel 
1-3.laravel手册
https://learnku.com/docs/laravel/5.6


延时队列
https://github.com/chenlinzhong/php-delayqueue

git高级操作
撤销未add的修改[删除]
git checkout . [或 filename]

撤销从add中的修改[删除]
git reset HEAD filename     
git checkout . [或 filename]    再执行该命令恢复到未add的修改[删除]

撤销已commit的代码，此时本地修改的代码也会被恢复[删除]
git log --pretty=oneline
git reset --hard commit-id
git reset --soft commit-id      撤销已commit的代码，此时本地修改的代码还存在

撤销已push远程的代码
git reset HEAD~n[或 commit-id]  n（1,2..）,然后，
git checkout . [或 filename]    撤销所有修改回到未add，强制push
git push -f



克隆tp5仓库
git clone https://github.com/top-think/think tp5  
然后切换到tp5目录继续克隆核心框架仓库
git clone https://github.com/top-think/framework thinkphp
注意,两次clone后 ,都切换分支到master上，再删除掉.git .gitignore 文件


[init]
echo "# tp5" >> README.md
git init
git add README.md
git commit -m "first commit"
git remote add origin  /home/wwwroot/git/tp5.git   # 这一步如果出错 fatal: remote origin already exists. 可先执行 git remote rm origin
git push -u origin master


git默认账户密码：        
git config --global credential.helper store
之后输入一次账号密码即可


查看本地环境配置
git config --list


清除git用户名密码：
git config --system --unset credential.helper

git日常操作指令
https://www.jianshu.com/p/c34a80b8d0ae


Linux 文件隐藏属性 
Linux 下的文件还有一些隐藏属性，必须使用 lsattr 来显示，默认情况下，文件的隐藏属性都是没有 设置的（ext 文件系统默认拥有 e 属性）。 
命令：lsattr [-a|d|R] 目录|文件  a显示所有的隐形属性，d显示目录，R递归显示
lsattr -a test
----i----------- test/.
---------------- test/..
---------------- test/a.txt

命令：chattr（超级用户可用） 
描述：文件系统属性 用法：chattr [+-=] [选项] 文件或目录
i：如果对文件设置 i 属性，那么不允许对文件进行增删改、也不能改名；
   如果对目录设置i属性，那么只能修改目录下文件的数据，但不允许建立和删除文件。
   这种属性常用于设置在系统或关键服务中的配置文件对提升系统安全性有帮助。 
a：如果对文件设置 a 属性，那么只能在文件中增加数据，但是不能删除也不能修改数据；如果对目录设置 a 属性，那么只允许在目录中建立 和修改文件，但是不允许删除。 
e：Linux 中绝大多数的文件都默认拥有 e 属性（ext 系列文件系统）。表示该文件是使用 ext 件系统进行存储的，而且不能使用“chattr -e”命令取消 e 属性



linux，lnmp5环境安装tp5
git clone https://github.com/top-think/think tp5
cd tp5 && checkout master
git clone https://github.com/top-think/framework thinkphp
cd thinkphp && checkout master
此时正常情况下可访问。
若访问不了，先检查权限
1.开启config.php debug为true;
2.在入口文件index.php 中，
error_reporting(E_ALL);
ini_set('display_errors', '1');
3.查看/home/wwwlogs目录下的nginx_error.log错误信息;
4.首页可访问，pathinfo 的url（IP/index.php/model/controller/action）访问报错,
  pathinfo兼容问题，而IP/index.php?s=/model/controller/action 可访问
  解决：https://blog.csdn.net/xysoul/article/details/79491597
  apache环境 .htaccess 
  <IfModule mod_rewrite.c>
	Options +FollowSymlinks -Multiviews
	RewriteEngine on
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteRule ^(.*)$ index.php?s=$1 [QSA,PT,L]
  </IfModule>
  nginx环境 conf/nginx.conf
  location ~ \.php {    #去掉$
         root          H:/PHPServer/WWW;  笔者这里默认是 html;
         fastcgi_pass   127.0.0.1:9000;
         fastcgi_index  index.php;
         fastcgi_split_path_info ^(.+\.php)(.*)$;       #增加
         fastcgi_param PATH_INFO $fastcgi_path_info;    #增加
         fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
         include        fastcgi_params;
    }
  https://blog.csdn.net/woshihaiyong168/article/details/54973353
 
  若是一键安装包lnmp
	原因：无法加载pathinfo
	解决办法：
	在nginx.conf(/usr/local/nginx/conf)中，
	将原先的‘include enable-php.conf’注释掉，
	更改为‘include enable-php-pathinfo.conf;’后重启nginx即可。  

5.若出现open_basedir权限问题，php授权目录设置
vim /usr/local/nginx/conf/fastcgi.conf
fastcgi_param PHP_ADMIN_VALUE "open_basedir=$document_root/:/tmp/:/proc/";
修改为
fastcgi_param PHP_ADMIN_VALUE "open_basedir=$document_root/../:/tmp/:/proc/";

若再不行，尝试以下方法：
在php.ini中配置
;open_basedir =
如果发现配置项前是有分号，表明php.ini中没有该设置。那就很可能是在  php-fpm  中的 fastcgi.conf中配置了。php-fpm中的配置会覆盖php.ini的配置。

在项目根目录中通过  .user.ini 进行配置。
.user.ini配置
首先，要使.user.ini生效，要设置php.ini 中的
user_ini.filename = ".user.ini"
user_ini.cache_ttl = 300

注释掉 fastcgi.conf 中的 open_basedir  的配置。

在项目根目录 创建 .user.ini文件，写入如下内容
open_basedir=/tmp/:/proc/:/you_web_path
/you_web_path 是你要添加的让php可以访问的路径。多个路径直接分号隔开
重启一下php-fpm 服务即可。

注意,三个地方配置的优先级如下
“php.ini” > “nginx fastcgi fastcgi_param” > “php-fpm.conf”

来自：https://www.cnblogs.com/guohong-hu/p/9350076.html

隐藏index.php
apache :
<IfModule mod_rewrite.c>
  Options +FollowSymlinks -Multiviews
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteRule ^(.*)$ index.php?/$1 [QSA,PT,L]
</IfModule>

nginx :
location / {
            if (!-e $request_filename) {
                rewrite  ^(.*)$  /index.php?s=/$1  last;
            }
    }
具体参考：
https://www.cnblogs.com/blibli/p/11134157.html





elasticsearch
安装参考：
linux: https://www.php.cn/linux-384847.html
windows: https://www.bbsmax.com/A/A2dmgg7bJe/

概念
索引：含有相同属性的文档集合（必须小写）
类型：索引可以定义一个或多个类型，文档必须属于一个类型
文档：文档是可以被索引的基本数据单元
<理解>:把索引看作一个database，类型就是一个table，文档相当于一行记录
分片：每个索引都有多个分片，每个分片是一个Lucene索引
备份：拷贝一份分片就完成了分片的备份
注意 elasticsearch 在创建索引时默认为5个分片1个备份，分片只能在索引创建前修改，而备份可以动态修改

elasticsearch 查询
https://blog.csdn.net/xingoo_/article/details/103170752
https://blog.csdn.net/cc185/article/details/93052150

elasticsearch  php扩展
composer.json中:
"require": {
        "elasticsearch/elasticsearch":"~2.0"
    }
根目录下：composer install


RabbitMQ+PHP消息队列
从本质上说消息对列就是一个队列结构的中间件，也就是说消息放入这个中间件之后就可以直接返回，并不需要系统立即处理，而另外会有一个程序读取这些数据，并按顺序进行逐次处理。

install
https://www.jianshu.com/p/a28ecc3209ed

来源：
https://www.cnblogs.com/fengyumeng/p/11133924.html
https://www.cnblogs.com/dump/p/8243868.html 理论
https://www.cnblogs.com/chenhaoyu/p/10731090.html
https://www.jianshu.com/p/dff50e23c6c5
https://www.cnblogs.com/chunguang/p/5634342.html
https://www.jianshu.com/p/a28ecc3209ed  ubuntu系统


blog-hexo
0.mkdir blog && cd blog
1.npm install -g hexo #hexo路径加载入环境变量，一般会下载到node-v9.9.0-linux-x64/bin目录下
2.hexo init
3.hexo s    #根目录下执行，返回端口http://IP:4000
4.hexo new [layout] <title>    #// [layout] 为布局，可选项为 `post`、`page`、`draft`，这将决定文章所在文件路径。
								// <title> 为文章标题
								// 如 hexo new post
4.1 发布
hexo g							
4.2 更多命令，查看
hexo -h
5.部署配置，根目录下找到 _congif.yml
# Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
  type: git
  repo: <你的仓库地址> # https://github.com/TJ-XiaJiaHao/TJ-XiaJiaHao.github.io
  branch: master
5.1 部署工具 
npm install hexo-deployer-git --save
5.2 部署命令
hexo clean
hexo deploy
6.换主题
https://github.com/Shen-Yu/hexo-theme-ayer




swoole

1.安装
wget  https://github.com/swoole/swoole-src/archive/v4.0.1.tar.gz
tar -zxvf v4.0.1.tar.gz
cd swoole-src-4.0.1
/usr/local/php/bin/phpize
./configure --with-php-config=/usr/local/php/bin/php-config
make && make install
最后，生成：
Installing shared extensions:     /usr/local/php/lib/php/extensions/no-debug-non-zts-20170718/
Installing header files:          /usr/local/php/include/php/
2.php.ini文件中加上swoole扩展
cd /usr/local/php/lib/php/extensions/no-debug-non-zts-20170718/
extension=swoole.so
3.查看有无加载
php -m | grep swoole
4.试运行swoole
php swoole/examples/server/echo.php (默认占用9501端口)
netstat -anp | grep 9501  或者 lsof -i:端口号 

源码安装参考：https://www.jianshu.com/p/e89659283d63








